(this["webpackJsonpulbi-prodvinutyi-kurs"]=this["webpackJsonpulbi-prodvinutyi-kurs"]||[]).push([[0],{219:function(e,t,a){},220:function(e,t,a){"use strict";a.r(t);var s=a(0),c=a.n(s),n=a(27),r=a.n(n),o=a(3),i=a(10),l=a(225),j=a(224),u=a(67),d=a(231),b=a(230);const O=e=>{const t=e.getFullYear(),a=e.getMonth()<10?"0".concat(e.getMonth()+1):e.getMonth()+1,s=e.getDate()<10?"0"+e.getDate():e.getDate();return"".concat(t,".").concat(a,".").concat(s)};var h=a(14);var m=e=>Object(h.jsx)(b.a,{dateCellRender:function(t){const a=O(t.toDate()),s=e.actions.filter(e=>e.date===a);return Object(h.jsx)("div",{children:s.map((e,t)=>Object(h.jsx)("div",{children:e.description},t))})}}),g=a(227),p=a(228),S=a(229),y=a(127),E=a(63),x=a.n(E);const I=function(){return{required:!0,message:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Please input your username!"}},T=e=>()=>({validator:(t,a)=>a.isSameOrAfter(x()(),"day")?Promise.resolve():Promise.reject(new Error(e))});var v=a(84);const A=v.c;var f=e=>{let{guests:t,submit:a}=e;const[s,n]=c.a.useState({author:"",date:"",guest:"",description:""}),{user:r}=A(e=>e.auth);return Object(h.jsxs)(g.a,{onFinish:()=>{r&&a(Object(o.a)(Object(o.a)({},s),{},{author:r.username}))},children:[Object(h.jsx)(g.a.Item,{label:"Description",name:"description",rules:[I()],children:Object(h.jsx)(p.a,{value:s.description,onChange:e=>n(Object(o.a)(Object(o.a)({},s),{},{description:e.target.value}))})}),Object(h.jsx)(g.a.Item,{label:"Date of Action",name:"date",rules:[I(),T("Events cannot be created for past days.")],children:Object(h.jsx)(S.a,{onChange:e=>(e=>{e&&n(Object(o.a)(Object(o.a)({},s),{},{date:O(e.toDate())}))})(e)})}),Object(h.jsx)(g.a.Item,{label:"Choose Guest",name:"guest",rules:[I()],children:Object(h.jsx)(y.a,{options:t.map(e=>({value:e.username,label:e.username})),value:s.guest,onChange:e=>n(Object(o.a)(Object(o.a)({},s),{},{guest:e}))})}),Object(h.jsx)(j.a,{justify:"end",children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(u.a,{htmlType:"submit",type:"primary",children:"Add Action"})})})]})},_=a(86);let N=function(e){return e.SET_IS_AUTH="SET_IS_AUTH",e.SET_ERROR="SET_ERROR",e.SET_IS_LOADING="SET_IS_LOADING",e.SET_USER="SET_USER",e}({});var U=a(109),L=a.n(U);const G={setIsAuth:e=>({type:N.SET_IS_AUTH,payload:e}),setIsLoading:e=>({type:N.SET_IS_LOADING,payload:e}),setUser:e=>({type:N.SET_USER,payload:e}),setError:e=>({type:N.SET_ERROR,payload:e}),login:(e,t)=>async a=>{a(G.setIsLoading(!0));try{setTimeout(async()=>{const s=(await L.a.get("./users.json")).data.find(a=>a.username===e&&a.password===t);s?(localStorage.setItem("isAuth","true"),localStorage.setItem("username",s.username),a(G.setUser(s)),a(G.setIsAuth(!0))):a(G.setError("Invalid username or password")),a(G.setIsLoading(!1))},1e3)}catch(s){G.setError("\u041c\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u043e\u0448\u0438\u0431\u043a\u0443")}},logout:()=>async e=>{localStorage.removeItem("isAuth"),localStorage.removeItem("username"),e(G.setIsAuth(!1)),e(G.setUser({}))}};let R=function(e){return e.SET_GUESTS="SET_GUESTS",e.SET_ACTIONS="SET_ACTIONS",e}({});class C{static async getUsers(){return await L.a.get("./users.json")}}const w={setGuests:e=>({type:R.SET_GUESTS,payload:e}),setActions:e=>({type:R.SET_ACTIONS,payload:e}),fetchGuests:()=>async e=>{try{const t=await C.getUsers();e(w.setGuests(t.data))}catch(t){console.log(t)}},createAction:e=>async t=>{try{const a=localStorage.getItem("actions")||"[]",s=JSON.parse(a);s.push(e),t(w.setActions(s)),localStorage.setItem("actions",JSON.stringify(s))}catch(a){console.log(a)}},fetchActions:e=>async t=>{try{const a=localStorage.getItem("actions")||"[]",s=JSON.parse(a).filter(t=>t.author===e||t.guest===e);t(w.setActions(s))}catch(a){console.log(a)}}},D=Object(o.a)(Object(o.a)({},G),w),k=()=>{const e=Object(v.b)();return Object(_.b)(D,e)};var P=()=>{Object(s.useEffect)(()=>{n(),b&&r(b.username)},[]);const{createAction:e}=k(),[t,a]=c.a.useState(!1),{fetchGuests:n,fetchActions:r}=k(),{guests:o,actions:i}=A(e=>e.event),{user:b}=A(e=>e.auth);return Object(h.jsxs)(l.a,{children:[Object(h.jsx)(m,{actions:i}),Object(h.jsx)(j.a,{justify:"center",children:Object(h.jsx)(u.a,{onClick:()=>a(!0),type:"primary",children:"Add action"})}),Object(h.jsx)(d.a,{title:"Add Action",visible:t,onCancel:()=>a(!1),footer:null,children:Object(h.jsx)(f,{submit:t=>{a(!1),e(t)},guests:o})})]})},H=a(226);var J=()=>{const{login:e}=k(),[t,a]=Object(s.useState)(""),[c,n]=Object(s.useState)(""),{error:r,isLoading:o}=A(e=>e.auth);return Object(h.jsxs)(g.a,{onFinish:()=>{e(t,c)},children:[r&&r,Object(h.jsx)(g.a.Item,{label:"Username",name:"username",rules:[I("Please input your username!")],children:Object(h.jsx)(p.a,{onChange:e=>a(e.target.value)})}),Object(h.jsx)(g.a.Item,{label:"Password",name:"password",rules:[I("Please input your password!")],children:Object(h.jsx)(p.a.Password,{onChange:e=>n(e.target.value)})}),Object(h.jsx)(g.a.Item,{label:null,children:Object(h.jsx)(u.a,{loading:o,type:"primary",htmlType:"submit",children:"Submit"})})]})};var F=()=>Object(h.jsx)(l.a,{children:Object(h.jsx)(j.a,{justify:"center",align:"middle",className:"h100",children:Object(h.jsx)(H.a,{children:Object(h.jsx)(J,{})})})});let M=function(e){return e.LOGIN="/login",e.EVENT="/",e}({});const V=[{path:M.EVENT,element:Object(h.jsx)(P,{})},{path:"*",element:Object(h.jsx)(i.a,{to:"/",replace:!0})}],q=[{path:M.LOGIN,element:Object(h.jsx)(F,{})},{path:"*",element:Object(h.jsx)(i.a,{to:M.LOGIN,replace:!0})}];var z=()=>{const{isAuth:e}=A(e=>e.auth);return Object(h.jsx)("div",{children:e?Object(h.jsx)(i.d,{children:V.map(e=>Object(s.createElement)(i.b,Object(o.a)(Object(o.a)({},e),{},{key:e.path})))}):Object(h.jsx)(i.d,{children:q.map(e=>Object(s.createElement)(i.b,Object(o.a)(Object(o.a)({},e),{},{key:e.path})))})})},B=a(232);var Y=()=>{const e=Object(i.q)(),{isAuth:t}=A(e=>e.auth),{logout:a}=k();return Object(h.jsx)(l.a.Header,{children:Object(h.jsx)(j.a,{justify:"end",children:Object(h.jsx)(B.a,{theme:"dark",mode:"horizontal",disabledOverflow:!0,selectable:!1,children:t?Object(h.jsx)(B.a.Item,{onClick:()=>{e(M.LOGIN,{replace:!0}),a()},children:"Logout"},1):Object(h.jsx)(B.a.Item,{onClick:()=>{e(M.EVENT,{replace:!0})},children:"Login"},12)})})})};a(219);var K=()=>{const{setUser:e,setIsAuth:t}=k();return Object(s.useEffect)(()=>{localStorage.getItem("isAuth")&&(e({username:localStorage.getItem("username")}),t(!0))},[]),Object(h.jsxs)(l.a,{children:[Object(h.jsx)(Y,{}),Object(h.jsx)(l.a.Content,{children:Object(h.jsx)(z,{})})]})},Q=a(89),W=a(150);const X={isAuth:!1,isLoading:!1,error:"",user:null};const Z={guests:[],actions:[]};var $={auth:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.SET_IS_AUTH:return Object(o.a)(Object(o.a)({},e),{},{isAuth:t.payload,isLoading:!1});case N.SET_ERROR:return Object(o.a)(Object(o.a)({},e),{},{error:t.payload,isLoading:!1});case N.SET_USER:return Object(o.a)(Object(o.a)({},e),{},{user:t.payload});case N.SET_IS_LOADING:return Object(o.a)(Object(o.a)({},e),{},{isLoading:t.payload});default:return e}},event:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.SET_GUESTS:return Object(o.a)(Object(o.a)({},e),{},{guests:t.payload});case R.SET_ACTIONS:return Object(o.a)(Object(o.a)({},e),{},{actions:t.payload});default:return e}}};const ee=Object(_.c)($),te=Object(_.d)(ee,Object(_.a)(W.a));r.a.render(Object(h.jsx)(v.a,{store:te,children:Object(h.jsx)(Q.a,{children:Object(h.jsx)(K,{})})}),document.getElementById("root"))}},[[220,1,2]]]);
//# sourceMappingURL=main.6d511897.chunk.js.map