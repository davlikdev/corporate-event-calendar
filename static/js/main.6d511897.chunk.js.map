{"version":3,"sources":["utils/date.ts","components/EventCalendar.tsx","utils/rules.ts","hooks/useTypedSelector.ts","components/EventForm.tsx","store/reducers/auth/types.ts","store/reducers/auth/action-creators.ts","store/reducers/event/types.ts","api/UserService.ts","store/reducers/event/action-creators.ts","store/reducers/action-creators.ts","hooks/useAction.ts","pages/Event.tsx","components/LoginForm.tsx","pages/Login.tsx","router/router.tsx","components/AppRouter.tsx","components/Navbar.tsx","App.tsx","store/reducers/auth/index.ts","store/reducers/event/index.ts","store/reducers/index.ts","store/store.ts","index.tsx"],"names":["formateDate","date","year","getFullYear","month","getMonth","concat","day","getDate","EventCalendar","props","_jsx","Calendar","dateCellRender","value","formatedDate","toDate","currentDaysActions","actions","filter","action","children","map","item","index","description","rules","required","message","arguments","length","undefined","validator","_","isSameOrAfter","moment","Promise","resolve","reject","Error","useTypedSelector","useSelector","EventForm","_ref","guests","submit","setAction","React","useState","author","guest","user","state","auth","_jsxs","Form","onFinish","submitForm","_objectSpread","username","Item","label","name","Input","onChange","e","target","DatePicker","selectDate","Select","options","g","Row","justify","Button","htmlType","type","AuthActionEnum","AuthActionCreators","setIsAuth","isAuth","SET_IS_AUTH","payload","setIsLoading","isLoading","SET_IS_LOADING","setUser","SET_USER","setError","error","SET_ERROR","login","password","async","dispatch","setTimeout","axios","get","data","find","localStorage","setItem","logout","removeItem","EventTypesEnum","UserService","getUsers","EventActionCreators","setGuests","SET_GUESTS","setActions","SET_ACTIONS","fetchGuests","response","console","log","createAction","getItem","json","JSON","parse","push","stringify","fetchActions","currentUserActions","j","allActionCreators","useAction","useDispatch","bindActionCreators","Event","useEffect","modal","setModal","event","Layout","onClick","Modal","title","visible","onCancel","footer","LoginForm","setUsername","setPassword","Password","loading","Login","align","className","Card","RouteNames","privateRoutes","path","EVENT","element","Navigate","to","replace","publicRoutes","LOGIN","AppRouter","Routes","route","_createElement","Route","key","Navbar","navigate","useNavigate","Header","Menu","theme","mode","disabledOverflow","selectable","App","Content","initialState","rootReducer","combineReducers","reducers","store","createStore","applyMiddleware","thunk","ReactDOM","render","Provider","HashRouter","document","getElementById"],"mappings":"mQAAO,MAAMA,EAAeC,IACxB,MAAMC,EAAOD,EAAKE,cACZC,EAAQH,EAAKI,WAAa,GAAE,IAAAC,OAAOL,EAAKI,WAAa,GAAMJ,EAAKI,WAAa,EAC7EE,EAAMN,EAAKO,UAAY,GAAK,IAAMP,EAAKO,UAAYP,EAAKO,UAC9D,MAAM,GAANF,OAAUJ,EAAI,KAAAI,OAAIF,EAAK,KAAAE,OAAIC,I,YCsBhBE,MAlBQC,GAcfC,cAACC,IAAQ,CAACC,eAbd,SAAwBC,GACpB,MAAMC,EAAef,EAAYc,EAAME,UACjCC,EAAqBP,EAAMQ,QAAQC,OAAOC,GAAUA,EAAOnB,OAASc,GAC1E,OACIJ,cAAA,OAAAU,SACKJ,EAAmBK,IAAI,CAACC,EAAMC,IAC/Bb,cAAA,OAAAU,SACKE,EAAKE,aADAD,KAKtB,I,qDClBG,MAAME,EACC,WAAgD,MAAM,CAC5DC,UAAU,EACVC,QAFsBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,8BAG5B,EAJQH,EAKKE,GAAoB,MAC9BI,UAASA,CAACC,EAAQnB,IACVA,EAAMoB,cAAcC,MAAU,OACvBC,QAAQC,UAEZD,QAAQE,OAAO,IAAIC,MAAMX,M,YCTrC,MAAMY,EAAoDC,IC+DlDC,MAtDGC,IAAwC,IAAvC,OAACC,EAAM,OAAEC,GAAwBF,EAChD,MAAOvB,EAAQ0B,GAAaC,IAAMC,SAAkB,CAChDC,OAAQ,GACRhD,KAAM,GACNiD,MAAO,GACPzB,YAAa,MAEX,KAAC0B,GAAQX,EAAiBY,GAASA,EAAMC,MAW/C,OACIC,eAACC,IAAI,CAACC,SANSC,KACXN,GACAN,EAAMa,wBAAC,CAAC,EAAGtC,GAAM,IAAE6B,OAAQE,EAAKQ,aAITtC,SAAA,CACvBV,cAAC4C,IAAKK,KAAI,CACNC,MAAM,cACNC,KAAK,cACLpC,MAAO,CAACA,KAAkBL,SAE1BV,cAACoD,IAAK,CAACjD,MAAOM,EAAOK,YACduC,SAAUC,GAAKnB,EAASY,wBAAC,CAAC,EAAGtC,GAAM,IAAEK,YAAawC,EAAEC,OAAOpD,aAEtEH,cAAC4C,IAAKK,KAAI,CACNC,MAAM,iBACNC,KAAK,OACLpC,MAAO,CAACA,IAAkBA,EAAkB,4CAA4CL,SAExFV,cAACwD,IAAU,CAACH,SAAU/D,GAzBdA,KACZA,GACA6C,EAASY,wBAAC,CAAC,EAAGtC,GAAM,IAAEnB,KAAMD,EAAYC,EAAKe,cAuBXoD,CAAWnE,OAE7CU,cAAC4C,IAAKK,KAAI,CAACC,MAAM,eAAeC,KAAK,QAAQpC,MAAO,CAACA,KAAkBL,SACnEV,cAAC0D,IAAM,CACHC,QAAS1B,EAAOtB,IAAKiD,IACV,CAACzD,MAAOyD,EAAEZ,SAAUE,MAAOU,EAAEZ,YAExC7C,MAAOM,EAAO8B,MACdc,SAAUd,GAASJ,EAASY,wBAAC,CAAC,EAAGtC,GAAM,IAAE8B,MAAOA,SAGxDvC,cAAC6D,IAAG,CAACC,QAAS,MAAMpD,SAChBV,cAAC4C,IAAKK,KAAI,CAAAvC,SACNV,cAAC+D,IAAM,CAACC,SAAU,SAAUC,KAAK,UAASvD,SAAC,uB,QCjDxD,IAAKwD,EAAc,SAAdA,GAAc,OAAdA,EAAc,0BAAdA,EAAc,sBAAdA,EAAc,gCAAdA,EAAc,oBAAdA,CAAc,M,sBCJnB,MAAMC,EAAqB,CAC9BC,UAAYC,IAAe,CAAsBJ,KAAMC,EAAeI,YAAaC,QAASF,IAC5FG,aAAeC,IAAkB,CAAyBR,KAAMC,EAAeQ,eAAgBH,QAASE,IACxGE,QAAUnC,IAAW,CAAsByB,KAAMC,EAAeU,SAAUL,QAAS/B,IACnFqC,SAAWC,IAAa,CAAuBb,KAAMC,EAAea,UAAWR,QAASO,IACxFE,MAAOA,CAAChC,EAAkBiC,IAAqBC,UAC3CC,EAAShB,EAAmBK,cAAa,IACzC,IACIY,WAAWF,UACP,MACM1C,SADiB6C,IAAMC,IAAa,iBACpBC,KAAKC,KAAKhD,GAAQA,EAAKQ,WAAaA,GAAYR,EAAKyC,WAAaA,GACpFzC,GACAiD,aAAaC,QAAQ,SAAU,QAC/BD,aAAaC,QAAQ,WAAYlD,EAAKQ,UACtCmC,EAAShB,EAAmBQ,QAAQnC,IACpC2C,EAAShB,EAAmBC,WAAU,KAGtCe,EAAShB,EAAmBU,SAAS,iCAEzCM,EAAShB,EAAmBK,cAAa,KAC1C,IAEP,CAAE,MAAOM,GACLX,EAAmBU,SAAS,qGAChC,GAEJc,OAAQA,IAAMT,UACVO,aAAaG,WAAW,UACxBH,aAAaG,WAAW,YACxBT,EAAShB,EAAmBC,WAAU,IACtCe,EAAShB,EAAmBQ,QAAQ,CAAC,MC7BtC,IAAKkB,EAAc,SAAdA,GAAc,OAAdA,EAAc,wBAAdA,EAAc,0BAAdA,CAAc,MCJX,MAAMC,EACjB,qBAAaC,GACT,aAAaV,IAAMC,IAAa,eACpC,ECDG,MAAMU,EAAsB,CAC/BC,UAAY1B,IAAgB,CAAwBN,KAAM4B,EAAeK,WAAY3B,YACrF4B,WAAa5B,IAAkB,CAAyBN,KAAM4B,EAAeO,YAAa7B,YAC1F8B,YAAaA,IAAMnB,UACf,IACI,MAAMoB,QAAiBR,EAAYC,WACnCZ,EAASa,EAAoBC,UAAUK,EAASf,MAEpD,CAAE,MAAOjC,GACLiD,QAAQC,IAAIlD,EAChB,GAEJmD,aAAehG,GAAoByE,UAC/B,IACI,MAAM3E,EAAUkF,aAAaiB,QAAQ,YAAc,KAC7CC,EAAOC,KAAKC,MAAMtG,GACxBoG,EAAKG,KAAKrG,GACV0E,EAASa,EAAoBG,WAAWQ,IACxClB,aAAaC,QAAQ,UAAWkB,KAAKG,UAAUJ,GACnD,CACA,MAAOrD,GACHiD,QAAQC,IAAIlD,EAChB,GAEJ0D,aAAehE,GAAoBkC,UAC/B,IACI,MAAM3E,EAAUkF,aAAaiB,QAAQ,YAAc,KAE7CO,EADOL,KAAKC,MAAMtG,GACQC,OAAQ0G,GAAKA,EAAE5E,SAAWU,GAAYkE,EAAE3E,QAAUS,GAClFmC,EAASa,EAAoBG,WAAWc,GAC5C,CACA,MAAO3D,GACHiD,QAAQC,IAAIlD,EAChB,ICnCK6D,EAAiBpE,wBAAA,GACvBoB,GACA6B,GCDMoB,EAAYA,KACrB,MAAMjC,EAAWkC,cACjB,OAAOC,YAAmBH,EAAmBhC,ICmClCoC,MAjCDA,KACVC,oBAAU,KACNnB,IACI7D,GACAwE,EAAaxE,EAAKQ,WAEvB,IAEH,MAIM,aAACyD,GAAgBW,KAChBK,EAAOC,GAAYtF,IAAMC,UAAS,IACnC,YAACgE,EAAW,aAAEW,GAAgBI,KAC9B,OAACnF,EAAM,QAAE1B,GAAWsB,EAAiBY,GAASA,EAAMkF,QACpD,KAACnF,GAAQX,EAAiBY,GAASA,EAAMC,MAC/C,OACIC,eAACiF,IAAM,CAAAlH,SAAA,CACLV,cAACF,EAAa,CAACS,QAASA,IACtBP,cAAC6D,IAAG,CAACC,QAAS,SAASpD,SACtBV,cAAC+D,IAAM,CAAC8D,QAASA,IAAMH,GAAS,GAAOzD,KAAK,UAASvD,SAAC,iBAEvDV,cAAC8H,IAAK,CAACC,MAAM,aAAaC,QAASP,EAC5BQ,SAAUA,IAAMP,GAAS,GACzBQ,OAAQ,KAAKxH,SAEhBV,cAAC+B,EAAS,CAACG,OAnBFzB,IACjBiH,GAAS,GACTjB,EAAahG,IAiB2BwB,OAAQA,U,SCYzCkG,MAxCGA,KACd,MAAM,MAACnD,GAASoC,KACTpE,EAAUoF,GAAe/F,mBAAS,KAClC4C,EAAUoD,GAAehG,mBAAS,KAInC,MAACyC,EAAK,UAAEL,GAAa5C,EAAiBY,GAASA,EAAMC,MAE3D,OACIC,eAACC,IAAI,CACDC,SAPOX,KACX8C,EAAMhC,EAAUiC,IAMKvE,SAAA,CAEhBoE,GAASA,EACV9E,cAAC4C,IAAKK,KAAI,CACNC,MAAM,WACNC,KAAK,WACLpC,MAAO,CAACA,EAAe,gCAAgCL,SAEvDV,cAACoD,IAAK,CAACC,SAAUC,GAAK8E,EAAY9E,EAAEC,OAAOpD,WAG/CH,cAAC4C,IAAKK,KAAI,CACNC,MAAM,WACNC,KAAK,WACLpC,MAAO,CAACA,EAAe,gCAAgCL,SAEvDV,cAACoD,IAAMkF,SAAQ,CAACjF,SAAUC,GAAK+E,EAAY/E,EAAEC,OAAOpD,WAIxDH,cAAC4C,IAAKK,KAAI,CAACC,MAAO,KAAKxC,SACnBV,cAAC+D,IAAM,CAACwE,QAAS9D,EAAWR,KAAK,UAAUD,SAAS,SAAQtD,SAAC,iBCvB9D8H,MAZDA,IAENxI,cAAC4H,IAAM,CAAAlH,SACHV,cAAC6D,IAAG,CAACC,QAAS,SAAU2E,MAAO,SAAUC,UAAW,OAAOhI,SACvDV,cAAC2I,IAAI,CAAAjI,SACDV,cAACmI,EAAS,UCCvB,IAAKS,EAAU,SAAVA,GAAU,OAAVA,EAAU,eAAVA,EAAU,UAAVA,CAAU,MAIf,MAAMC,EAA2B,CACpC,CAACC,KAAKF,EAAWG,MAAOC,QAAShJ,cAACuH,EAAK,KACvC,CAACuB,KAAK,IAAKE,QAAShJ,cAACiJ,IAAQ,CAACC,GAAG,IAAIC,SAAO,MAGnCC,EAA0B,CACnC,CAACN,KAAMF,EAAWS,MAAOL,QAAShJ,cAACwI,EAAK,KACxC,CAACM,KAAK,IAAKE,QAAShJ,cAACiJ,IAAQ,CAACC,GAAIN,EAAWS,MAAOF,SAAO,MCMhDG,MAtBGA,KACd,MAAM,OAACjF,GAAUxC,EAAiBY,GAASA,EAAMC,MAEjD,OACI1C,cAAA,OAAAU,SACK2D,EACGrE,cAACuJ,IAAM,CAAA7I,SACFmI,EAAclI,IAAI6I,GACfC,wBAACC,IAAK3G,wBAAA,GAAKyG,GAAK,IAAEG,IAAKH,EAAMV,WAIrC9I,cAACuJ,IAAM,CAAA7I,SACF0I,EAAazI,IAAI6I,GACdC,wBAACC,IAAK3G,wBAAA,GAAKyG,GAAK,IAAEG,IAAKH,EAAMV,c,SCYtCc,MAxBAA,KACX,MAAMC,EAAWC,eACX,OAACzF,GAAUxC,EAAiBY,GAASA,EAAMC,OAC3C,OAACiD,GAAUyB,IAEjB,OACIpH,cAAC4H,IAAOmC,OAAM,CAAArJ,SACVV,cAAC6D,IAAG,CAACC,QAAQ,MAAKpD,SACdV,cAACgK,IAAI,CAACC,MAAM,OAAOC,KAAK,aAAaC,kBAAgB,EAACC,YAAY,EAAM1J,SACnE2D,EAASrE,cAACgK,IAAK/G,KAAI,CAAC4E,QAASA,KACtBgC,EAASjB,EAAWS,MAAO,CAACF,SAAS,IACrCxD,KACFjF,SAAS,UAAH,GAENV,cAACgK,IAAK/G,KAAI,CAAC4E,QAASA,KAClBgC,EAASjB,EAAWG,MAAO,CAACI,SAAS,KACvCzI,SAAU,SAAJ,W,OCEjB2J,MAlBHA,KACR,MAAM,QAAC1F,EAAO,UAAEP,GAAagD,IAO7B,OANAI,oBAAU,KACF/B,aAAaiB,QAAQ,YACrB/B,EAAQ,CAAC3B,SAAUyC,aAAaiB,QAAQ,cACxCtC,GAAU,KAEf,IAECzB,eAACiF,IAAM,CAAAlH,SAAA,CACHV,cAAC4J,EAAM,IACP5J,cAAC4H,IAAO0C,QAAO,CAAA5J,SACXV,cAACsJ,EAAS,U,iBCjB1B,MAAMiB,EAA0B,CAC5BlG,QAAQ,EACRI,WAAW,EACXK,MAAO,GACPtC,KAAM,MCJV,MAAM+H,EAA4B,CAC9BtI,OAAQ,GACR1B,QAAS,ICAE,OACXmC,KFIW,WAA2E,IAAtDD,EAAKvB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAGqJ,EAAc9J,EAAkBS,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACxE,OAAQX,EAAOwD,MACX,KAAKC,EAAeI,YAChB,OAAAvB,wBAAA,GAAWN,GAAK,IAAE4B,OAAQ5D,EAAO8D,QAASE,WAAW,IACzD,KAAKP,EAAea,UAChB,OAAAhC,wBAAA,GAAWN,GAAK,IAAEqC,MAAOrE,EAAO8D,QAASE,WAAW,IACxD,KAAKP,EAAeU,SAChB,OAAA7B,wBAAA,GAAWN,GAAK,IAAED,KAAM/B,EAAO8D,UACnC,KAAKL,EAAeQ,eAChB,OAAA3B,wBAAA,GAAWN,GAAK,IAAEgC,UAAWhE,EAAO8D,UAExC,QACI,OAAO9B,EAEnB,EEjBIkF,MDCW,WAA+E,IAAxDlF,EAAKvB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAGqJ,EAAc9J,EAAmBS,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAC3E,OAAQX,EAAOwD,MACX,KAAK4B,EAAeK,WAChB,OAAAnD,wBAAA,GAAWN,GAAK,IAAER,OAAQxB,EAAO8D,UACrC,KAAKsB,EAAeO,YAChB,OAAArD,wBAAA,GAAWN,GAAK,IAAElC,QAASE,EAAO8D,UACtC,QACI,OAAO9B,EAEnB,GEbA,MAAM+H,GAAcC,YAAgBC,GAEvBC,GAAQC,YAAYJ,GAAaK,YAAgBC,MCE9DC,IAASC,OACLhL,cAACiL,IAAQ,CAACN,MAAOA,GAAMjK,SACnBV,cAACkL,IAAU,CAAAxK,SACPV,cAACqK,EAAG,QAGZc,SAASC,eAAe,Q","file":"static/js/main.6d511897.chunk.js","sourcesContent":["export const formateDate = (date: Date) : string => {\n    const year = date.getFullYear()\n    const month = date.getMonth() < 10 ? `0${date.getMonth() + 1}` : date.getMonth() + 1\n    const day = date.getDate() < 10 ? '0' + date.getDate() : date.getDate()\n    return `${year}.${month}.${day}`\n}","import React from 'react';\nimport {Calendar} from \"antd\";\nimport {IAction} from \"../models\";\nimport {Moment} from \"moment\";\nimport {formateDate} from \"../utils/date\";\ninterface EventCalendarProps {\n    actions: IAction[]\n}\nconst EventCalendar = (props : EventCalendarProps) => {\n    function dateCellRender(value : Moment) {\n        const formatedDate = formateDate(value.toDate())\n        const currentDaysActions = props.actions.filter(action => action.date === formatedDate)\n        return (\n            <div>\n                {currentDaysActions.map((item, index) =>\n                <div key={index}>\n                    {item.description}\n                </div>)}\n            </div>\n        )\n    }\n    return (\n        <Calendar dateCellRender={dateCellRender} />\n    );\n};\n\nexport default EventCalendar;","import moment, {Moment} from \"moment\";\n\nexport const rules = {\n    required: (message: string = \"Please input your username!\") => ({\n        required: true,\n        message,\n    }),\n    isDateAfter: (message: string) => () => ({\n        validator(_: any, value: Moment) {\n            if (value.isSameOrAfter(moment(), \"day\")) {\n                return Promise.resolve()\n            }\n            return Promise.reject(new Error(message))\n        }\n    })\n}","import {TypedUseSelectorHook, useSelector} from \"react-redux\";\nimport {RootState} from \"../store/store\";\n\nexport const useTypedSelector: TypedUseSelectorHook<RootState> = useSelector","import React from 'react';\nimport {Button, DatePicker, Form, Input, Row, Select} from \"antd\";\nimport {rules} from \"../utils/rules\";\nimport {IAction, IUser} from \"../models\";\nimport {Moment} from \"moment\";\nimport {formateDate} from \"../utils/date\";\nimport {useTypedSelector} from \"../hooks/useTypedSelector\";\n\ninterface EventFormProps {\n    guests: IUser[]\n    submit: (action : IAction) => void\n}\nconst EventForm = ({guests, submit} : EventFormProps) => {\n    const [action, setAction] = React.useState<IAction>({\n        author: '',\n        date: \"\",\n        guest: \"\",\n        description: ''\n    })\n    const {user} = useTypedSelector(state => state.auth)\n    const selectDate = (date: Moment | null) => {\n        if (date) {\n            setAction({...action, date: formateDate(date.toDate())})\n        }\n    }\n    const submitForm = () => {\n        if (user) {\n            submit({...action, author: user.username})\n        }\n    }\n    return (\n        <Form onFinish={submitForm}>\n            <Form.Item\n                label=\"Description\"\n                name=\"description\"\n                rules={[rules.required()]}\n            >\n                <Input value={action.description}\n                       onChange={e => setAction({...action, description: e.target.value})}/>\n            </Form.Item>\n            <Form.Item\n                label=\"Date of Action\"\n                name=\"date\"\n                rules={[rules.required(), rules.isDateAfter(\"Events cannot be created for past days.\")]}\n            >\n                <DatePicker onChange={date => selectDate(date)}/>\n            </Form.Item>\n            <Form.Item label=\"Choose Guest\" name=\"guest\" rules={[rules.required()]}>\n                <Select\n                    options={guests.map( g => {\n                        return {value: g.username, label: g.username}\n                    })}\n                    value={action.guest}\n                    onChange={guest => setAction({...action, guest: guest})}\n                />\n            </Form.Item>\n            <Row justify={'end'}>\n                <Form.Item>\n                    <Button htmlType={\"submit\"} type=\"primary\">Add Action</Button>\n                </Form.Item>\n            </Row>\n\n        </Form>\n    );\n};\n\nexport default EventForm;","import {IUser} from \"../../../models\";\n\nexport interface AuthState {\n    isAuth: boolean,\n    isLoading: boolean,\n    error: string,\n    user: IUser | null,\n}\n\nexport enum AuthActionEnum {\n    SET_IS_AUTH = 'SET_IS_AUTH',\n    SET_ERROR = 'SET_ERROR',\n    SET_IS_LOADING = 'SET_IS_LOADING',\n    SET_USER = 'SET_USER',\n}\n\nexport interface SetAuthAction {\n    type: AuthActionEnum.SET_IS_AUTH,\n    payload: boolean\n}\nexport interface SetErrorAction {\n    type: AuthActionEnum.SET_ERROR,\n    payload: string\n}\nexport interface SetLoadingAction {\n    type: AuthActionEnum.SET_IS_LOADING,\n    payload: boolean\n}\nexport interface SetUserAction {\n    type: AuthActionEnum.SET_USER,\n    payload: IUser\n}\n\nexport type AuthAction =\n    SetAuthAction |\n    SetErrorAction |\n    SetLoadingAction |\n    SetUserAction","import {AuthActionEnum, SetAuthAction, SetErrorAction, SetLoadingAction, SetUserAction} from \"./types\";\nimport {IUser} from \"../../../models\";\nimport {AppDispatch} from \"../../store\";\nimport axios from \"axios\";\n\nexport const AuthActionCreators = {\n    setIsAuth: (isAuth: boolean): SetAuthAction => ({type: AuthActionEnum.SET_IS_AUTH, payload: isAuth}),\n    setIsLoading: (isLoading: boolean): SetLoadingAction => ({type: AuthActionEnum.SET_IS_LOADING, payload: isLoading}),\n    setUser: (user: IUser): SetUserAction => ({type: AuthActionEnum.SET_USER, payload: user}),\n    setError: (error: string): SetErrorAction => ({type: AuthActionEnum.SET_ERROR, payload: error}),\n    login: (username: string, password: string) => async (dispatch: AppDispatch) => {\n        dispatch(AuthActionCreators.setIsLoading(true));\n        try {\n            setTimeout(async () => {\n                const response = await axios.get<IUser[]>('./users.json')\n                const user = response.data.find(user => user.username === username && user.password === password)\n                if (user) {\n                    localStorage.setItem(\"isAuth\", \"true\")\n                    localStorage.setItem(\"username\", user.username)\n                    dispatch(AuthActionCreators.setUser(user))\n                    dispatch(AuthActionCreators.setIsAuth(true))\n\n                } else {\n                    dispatch(AuthActionCreators.setError(\"Invalid username or password\"))\n                }\n                dispatch(AuthActionCreators.setIsLoading(false))\n            }, 1000)\n\n        } catch (error) {\n            AuthActionCreators.setError(\"Мы получили ошибку\")\n        }\n    },\n    logout: () => async (dispatch:AppDispatch) => {\n        localStorage.removeItem('isAuth')\n        localStorage.removeItem(\"username\")\n        dispatch(AuthActionCreators.setIsAuth(false))\n        dispatch(AuthActionCreators.setUser({} as IUser))\n\n    }\n}","import {IAction, IUser} from \"../../../models\";\n\nexport interface EventState {\n    guests: IUser[],\n    actions: IAction[],\n}\n\nexport enum EventTypesEnum {\n    SET_GUESTS = \"SET_GUESTS\",\n    SET_ACTIONS = \"SET_ACTIONS\",\n}\n\nexport interface SetGuestsAction {\n    type: EventTypesEnum.SET_GUESTS,\n    payload: IUser[],\n}\nexport interface SetActionsAction {\n    type: EventTypesEnum.SET_ACTIONS,\n    payload: IAction[],\n}\n\nexport type EventAction = SetGuestsAction | SetActionsAction","import {IUser} from \"../models\";\nimport axios, {AxiosResponse} from \"axios\";\n\nexport default class UserService {\n    static async getUsers(): Promise<AxiosResponse<IUser[]>> {\n        return await axios.get<IUser[]>('./users.json')\n    }\n}","import {IAction, IUser} from \"../../../models\";\nimport {EventTypesEnum, SetActionsAction, SetGuestsAction} from \"./types\";\nimport {AppDispatch} from \"../../store\";\nimport UserService from \"../../../api/UserService\";\n\nexport const EventActionCreators = {\n    setGuests: (payload: IUser[]) : SetGuestsAction=> ({type: EventTypesEnum.SET_GUESTS, payload}),\n    setActions: (payload: IAction[]) : SetActionsAction=> ({type: EventTypesEnum.SET_ACTIONS, payload}),\n    fetchGuests: () => async (dispatch: AppDispatch) => {\n        try {\n            const response = await UserService.getUsers()\n            dispatch(EventActionCreators.setGuests(response.data))\n\n        } catch (e) {\n            console.log(e)\n        }\n    },\n    createAction: (action: IAction) => async (dispatch: AppDispatch) => {\n        try {\n            const actions = localStorage.getItem(\"actions\") || \"[]\";\n            const json = JSON.parse(actions) as IAction[];\n            json.push(action)\n            dispatch(EventActionCreators.setActions(json))\n            localStorage.setItem(\"actions\", JSON.stringify(json))\n        }\n        catch (e) {\n            console.log(e)\n        }\n    },\n    fetchActions: (username:string) => async (dispatch: AppDispatch) => {\n        try {\n            const actions = localStorage.getItem(\"actions\") || \"[]\";\n            const json = JSON.parse(actions) as IAction[];\n            const currentUserActions = json.filter( j => j.author === username || j.guest === username)\n            dispatch(EventActionCreators.setActions(currentUserActions))\n        }\n        catch (e) {\n            console.log(e)\n        }\n    }\n}","import {AuthActionCreators} from \"./auth/action-creators\";\nimport {EventActionCreators} from \"./event/action-creators\";\n\nexport const allActionCreators = {\n    ...AuthActionCreators,\n    ...EventActionCreators\n}","import {useDispatch} from \"react-redux\";\nimport {bindActionCreators} from \"redux\";\nimport {allActionCreators} from \"../store/reducers/action-creators\";\n\nexport const useAction = () => {\n    const dispatch = useDispatch();\n    return bindActionCreators(allActionCreators, dispatch);\n}","import {Button, Layout, Modal, Row} from 'antd';\nimport React, {useEffect} from 'react';\nimport EventCalendar from \"../components/EventCalendar\";\nimport EventForm from \"../components/EventForm\";\nimport {useAction} from \"../hooks/useAction\";\nimport {useTypedSelector} from \"../hooks/useTypedSelector\";\nimport {IAction} from \"../models\";\n\nconst Event = () => {\n    useEffect(() => {\n        fetchGuests()\n        if (user) {\n            fetchActions(user.username)\n        }\n    }, []);\n\n    const addNewEvent = (action: IAction) => {\n        setModal(false)\n        createAction(action)\n    }\n    const {createAction} = useAction();\n    const [modal, setModal] = React.useState(false);\n    const {fetchGuests, fetchActions} = useAction()\n    const {guests, actions} = useTypedSelector(state => state.event)\n    const {user} = useTypedSelector(state => state.auth)\n    return (\n        <Layout>\n          <EventCalendar actions={actions}/>\n            <Row justify={\"center\"}>\n             <Button onClick={() => setModal(true)} type=\"primary\">Add action</Button>\n            </Row>\n            <Modal title=\"Add Action\" visible={modal}\n                   onCancel={() => setModal(false)}\n                   footer={null}\n            >\n                <EventForm submit={addNewEvent} guests={guests} />\n            </Modal>\n        </Layout>\n    );\n};\n\nexport default Event;","import React, {useState} from 'react';\nimport {Button, Form, Input} from \"antd\";\nimport {rules} from \"../utils/rules\";\nimport {useDispatch} from \"react-redux\";\nimport {useTypedSelector} from \"../hooks/useTypedSelector\";\nimport {useAction} from \"../hooks/useAction\";\n\nconst LoginForm = () => {\n    const {login} = useAction()\n    const [username, setUsername] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const submit = () => {\n        login(username, password);\n    }\n    const {error, isLoading} = useTypedSelector(state => state.auth)\n\n    return (\n        <Form\n            onFinish={submit}\n        >\n            {error && error}\n            <Form.Item\n                label=\"Username\"\n                name=\"username\"\n                rules={[rules.required('Please input your username!')]}\n            >\n                <Input onChange={e => setUsername(e.target.value)}/>\n            </Form.Item>\n\n            <Form.Item\n                label=\"Password\"\n                name=\"password\"\n                rules={[rules.required('Please input your password!')]}\n            >\n                <Input.Password onChange={e => setPassword(e.target.value)}/>\n            </Form.Item>\n\n\n            <Form.Item label={null}>\n                <Button loading={isLoading} type=\"primary\" htmlType=\"submit\">\n                    Submit\n                </Button>\n            </Form.Item>\n        </Form>\n    );\n};\n\nexport default LoginForm;","import React from 'react';\nimport {Card, Layout, Row} from \"antd\";\nimport LoginForm from \"../components/LoginForm\";\n\nconst Login = () => {\n    return (\n        <Layout>\n            <Row justify={\"center\"} align={\"middle\"} className={'h100'}>\n                <Card>\n                    <LoginForm />\n                </Card>\n            </Row>\n        </Layout>\n    );\n};\n\nexport default Login;","import React from \"react\";\nimport Event from \"../pages/Event\"\nimport Login from \"../pages/Login\";\nimport {Navigate} from \"react-router-dom\";\n\n\nexport interface IRoute {\n    path: string;\n    element: React.ReactNode\n}\nexport enum RouteNames {\n    LOGIN = \"/login\",\n    EVENT = \"/\",\n}\nexport const privateRoutes : IRoute[] = [\n    {path:RouteNames.EVENT, element: <Event/>,},\n    {path:\"*\", element: <Navigate to=\"/\" replace/>}\n\n]\nexport const publicRoutes : IRoute[] = [\n    {path: RouteNames.LOGIN, element: <Login/>,},\n    {path:\"*\", element: <Navigate to={RouteNames.LOGIN} replace/>}\n]","import React from 'react';\nimport {Route, Routes} from \"react-router-dom\";\nimport {privateRoutes, publicRoutes} from \"../router/router\";\nimport {useTypedSelector} from \"../hooks/useTypedSelector\";\n\nconst AppRouter = () => {\n    const {isAuth} = useTypedSelector(state => state.auth)\n\n    return (\n        <div>\n            {isAuth ?\n                <Routes>\n                    {privateRoutes.map(route => (\n                        <Route {...route} key={route.path}/>\n                    ))}\n                </Routes>\n                :\n                <Routes>\n                    {publicRoutes.map(route => (\n                        <Route {...route} key={route.path}/>\n                    ))}\n                </Routes>\n            }\n        </div>\n    );\n};\n\nexport default AppRouter;","import {Layout, Menu, Row} from 'antd';\nimport React from 'react';\nimport {useNavigate} from \"react-router-dom\";\nimport {RouteNames} from \"../router/router\";\nimport {useTypedSelector} from \"../hooks/useTypedSelector\";\nimport {useAction} from \"../hooks/useAction\";\n\nconst Navbar = () => {\n    const navigate = useNavigate();\n    const {isAuth} = useTypedSelector(state => state.auth)\n    const {logout} = useAction()\n\n    return (\n        <Layout.Header>\n            <Row justify=\"end\">\n                <Menu theme=\"dark\" mode=\"horizontal\" disabledOverflow selectable={false}>\n                    {isAuth ? <Menu.Item onClick={() => {\n                            navigate(RouteNames.LOGIN, {replace: true})\n                            logout()\n                        }} key={1}>Logout</Menu.Item>\n\n                        : <Menu.Item onClick={() => {\n                            navigate(RouteNames.EVENT, {replace: true})\n                        }} key={12}>Login</Menu.Item>\n                    }\n                </Menu>\n            </Row>\n        </Layout.Header>\n    );\n};\n\nexport default Navbar;","import React, {useEffect} from 'react';\nimport AppRouter from \"./components/AppRouter\";\nimport {Layout} from \"antd\";\nimport Navbar from \"./components/Navbar\";\nimport './App.css'\nimport {useAction} from \"./hooks/useAction\";\nimport {IUser} from \"./models\";\nconst App = () => {\n    const {setUser, setIsAuth} = useAction()\n    useEffect(() => {\n        if (localStorage.getItem('isAuth')) {\n            setUser({username: localStorage.getItem('username' || '')} as IUser)\n            setIsAuth(true)\n        }\n    }, []);\n    return (\n        <Layout>\n            <Navbar />\n            <Layout.Content>\n                <AppRouter/>\n            </Layout.Content>\n        </Layout>\n    );\n};\n\nexport default App;","import {AuthAction, AuthActionEnum, AuthState} from \"./types\";\n\nconst initialState: AuthState = {\n    isAuth: false,\n    isLoading: false,\n    error: \"\",\n    user: null\n}\n\nexport default function authReducer(state = initialState, action: AuthAction): AuthState {\n    switch (action.type) {\n        case AuthActionEnum.SET_IS_AUTH:\n            return {...state, isAuth: action.payload, isLoading: false};\n        case AuthActionEnum.SET_ERROR:\n            return {...state, error: action.payload, isLoading: false};\n        case AuthActionEnum.SET_USER:\n            return {...state, user: action.payload};\n        case AuthActionEnum.SET_IS_LOADING: {\n            return {...state, isLoading: action.payload}\n        }\n        default:\n            return state\n    }\n}","import {EventState, EventAction, EventTypesEnum} from \"./types\";\n\nconst initialState : EventState = {\n    guests: [],\n    actions: [],\n}\n\nexport default function EventReducer (state = initialState, action: EventAction) : EventState{\n    switch (action.type) {\n        case EventTypesEnum.SET_GUESTS:\n            return {...state, guests: action.payload}\n        case EventTypesEnum.SET_ACTIONS:\n            return {...state, actions: action.payload}\n        default:\n            return state\n    }\n}","import auth from \"./auth/index\";\nimport event from \"./event/index\";\n\n\nexport default {\n    auth,\n    event,\n}","import {applyMiddleware, combineReducers, createStore} from \"redux\";\nimport thunk from \"redux-thunk\";\nimport reducers from \"./reducers\";\nconst rootReducer = combineReducers(reducers)\n\nexport const store = createStore(rootReducer, applyMiddleware(thunk))\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport {Provider} from \"react-redux\";\nimport {HashRouter} from \"react-router-dom\";\nimport {store} from \"./store/store\";\n\nReactDOM.render(\n    <Provider store={store}>\n        <HashRouter>\n            <App />\n        </HashRouter>\n    </Provider>,\n    document.getElementById('root')\n);"],"sourceRoot":""}